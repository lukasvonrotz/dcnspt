<h1>Criteria Params of <%= @project.name %></h1>
</br>

<% if @criterionparams.nil? %>
    No criteria params in database.
<% else %>
    <div class="table-responsive">
      <table id="user_table" class="table" cellspacing="0" cellpadding="0" width="100%" style="border: none;">
        <thead>
          <tr>
            <th>Criterion name</th>
            <th>Weight</th>
            <th>Preference threshold</th>
            <th>Indifference threshold</th>
            <th>Veto threshold</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>Criterion name</th>
            <th>Weight</th>
            <th>Preference threshold</th>
            <th>Indifference threshold</th>
            <th>Veto threshold</th>
            <th>Actions</th>
          </tr>
        </tfoot>
        <tbody>
          <% @criterionparams.each do |criterionparam| %>
            <tr>
              <%= render 'form', :criterionparam => criterionparam, :project => criterionparam.project, :criterionparamname => criterionparam.criterion.name, :criterionparamid => criterionparam.id %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
<% end %>

<%= link_to "Back to project", project_path(@project.id) %>

<script>
  $(document).ready ( function(){
    <% @criterionparams.each_with_index do |criterionparam, i| %>
      <% if i != 0 %>
        $("input.criterionparam<%=criterionparam.id %>_fld").attr("disabled", true);
      <% else %>
        $("a.criterionparam<%=criterionparam.id %>_edit").hide();
        $("input.criterionparam<%=criterionparam.id %>_fld").attr("disabled", false);
      <% end %>
    <% end %>
  });
  function editLine(id) {
    $("input.criterionparam_fld").attr("disabled", true);
    $("a.criterionparam_edit").show();
    $("a.criterionparam" + id + "_edit").hide();
    $("input.criterionparam" + id + "_fld").attr("disabled", false);
  }

</script>