<h1>Criterion Values of <%= @employee.firstname %> <%= @employee.surname %></h1>
</br>

<% if @criterionvalues.nil? %>
    No criteria values in database.
<% else %>
    <div class="table-responsive">
      <table id="user_table" class="table" cellspacing="0" cellpadding="0" width="100%" style="border: none;">
        <thead>
          <tr>
            <th>Criterion name</th>
            <th>Criterion context</th>
            <th>Value</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>Criterion name</th>
            <th>Criterion context</th>
            <th>Value</th>
            <th>Actions</th>
          </tr>
        </tfoot>
        <tbody>
          <% @criterionvalues.each do |criterionvalue| %>
            <tr>
              <%= render 'form', :criterionvalue => criterionvalue, :employee => criterionvalue.employee,
                         :criterionvaluename => criterionvalue.criterion.name, :criterionvalueid => criterionvalue.id,
                         :criterionvaluecontext => criterionvalue.criterion.criterioncontext.name%>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
<% end %>

<%= link_to "Back to employee", employee_path(@employee.id) %>

<script>

  $(document).ready ( function(){
    <% @criterionvalues.each_with_index do |criterionvalue, i| %>
      <% if i != 0 %>
        $("input.criterionvalue<%=criterionvalue.id %>_fld").attr("disabled", true);
      <% else %>
        $("a.criterionvalue<%=criterionvalue.id %>_edit").hide();
        $("input.criterionvalue<%=criterionvalue.id %>_fld").attr("disabled", false);
      <% end %>
    <% end %>
  });

  function editLine(id) {
    $("input.criterionvalue_fld").attr("disabled", true);
    $("a.criterionvalue_edit").show();
    $("a.criterionvalue" + id + "_edit").hide();
    $("input.criterionvalue" + id + "_fld").attr("disabled", false);
  }

</script>